import{j as G,E as H,l as V,i as w,o as s,f as n,b as e,r as U,h as A,v as D,a as b,w as C,n as $,u as d,T as K,P as y,t as g,e as _,J as L,A as O,X,c as S,g as q,k as x,F as j,H as B}from"./app-77389f62.js";import{_ as z}from"./Checkbox-9e2165a6.js";import{a as h,_ as T}from"./TextInput-15afab84.js";const I={class:"relative"},Q={__name:"Dropdown",props:{align:{default:"right"},width:{default:"48"},contentClasses:{default:()=>["py-1","bg-white"]}},setup(t){const a=t,u=i=>{m.value&&i.key==="Escape"&&(m.value=!1)};G(()=>document.addEventListener("keydown",u)),H(()=>document.removeEventListener("keydown",u));const f=V(()=>({48:"w-48"})[a.width.toString()]),v=V(()=>a.align==="left"?"origin-top-left left-0":a.align==="right"?"origin-top-right right-0":"origin-top"),m=w(!1);return(i,c)=>(s(),n("div",I,[e("div",{onClick:c[0]||(c[0]=r=>m.value=!m.value)},[U(i.$slots,"trigger")]),A(e("div",{class:"fixed inset-0 z-40",onClick:c[1]||(c[1]=r=>m.value=!1)},null,512),[[D,m.value]]),b(K,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:C(()=>[A(e("div",{class:$(["absolute z-50 mt-2 rounded-md shadow-lg",[d(f),d(v)]]),style:{display:"none"},onClick:c[2]||(c[2]=r=>m.value=!1)},[e("div",{class:$(["rounded-md ring-1 ring-black ring-opacity-5",t.contentClasses])},[U(i.$slots,"content")],2)],2),[[D,m.value]])]),_:3})]))}},R={class:"flex justify-between items-center"},W={class:"flex items-center gap-2 w-full mr-3"},Y=["onSubmit"],Z=e("button",{type:"submit",class:"text-sm border p-1.5 rounded hover:bg-gray-50"}," Submit ",-1),ee=e("span",{class:"material-symbols-outlined opacity-80 cursor-pointer text-xl"}," more_horiz ",-1),te={class:"flex flex-col px-3 py-1"},se={__name:"SubtaskContainer",props:["subtask"],setup(t){const a=t,u=w(!1),f=y({updatedDescription:null}),v=y({is_completed:null}),m=r=>{v.is_completed=r,v.patch(`${a.subtask.id}`)},i=()=>{f.patch(`${a.subtask.id}`)},c=()=>{L.visit(`${a.subtask.id}`,{method:"delete"})};return(r,p)=>(s(),n("div",R,[e("div",W,[b(z,{value:t.subtask.id,"onUpdate:checked":p[0]||(p[0]=k=>m(k)),checked:t.subtask.is_completed==1},null,8,["value","checked"]),u.value?(s(),n("form",{key:1,onSubmit:_(i,["prevent"]),class:"flex w-full gap-2 items-center h-full"},[b(h,{value:t.subtask.description,"onUpdate:modelValue":p[1]||(p[1]=k=>d(f).updatedDescription=k),class:"w-full p-1 border"},null,8,["value"]),e("button",{onClick:p[2]||(p[2]=k=>u.value=!1),class:"text-sm border p-1.5 rounded hover:bg-gray-50"}," Cancel "),Z],40,Y)):(s(),n("p",{key:0,class:$([t.subtask.is_completed?"line-through":"","break-words w-full"])},g(t.subtask.description),3))]),b(Q,null,{trigger:C(()=>[ee]),content:C(()=>[e("div",te,[e("ul",null,[e("li",{onClick:p[3]||(p[3]=k=>u.value=!0),class:"hover:bg-gray-100 p-1 rounded text-sm"},"Edit"),e("li",{onClick:c,class:"hover:bg-gray-100 p-1 rounded text-sm"},"Delete")])])]),_:1})]))}},oe={key:0,class:"w-full break-words"},le=["onSubmit"],ne=e("button",{type:"submit",class:"border p-1 rounded"}," Submit ",-1),ae=e("hr",{class:"my-2"},null,-1),re={class:"flex justify-between items-center"},de={class:"text-xs text-gray-500"},ie={class:"space-x-2"},ue={__name:"CommentContainer",props:["comment"],setup(t){const a=t,u=y({updatedContent:a.comment.content}),f=()=>{u.patch(`/comment/${a.comment.id}`,{onSuccess:()=>u.reset("updatedContent")}),i.value=!1},v=()=>{L.delete(`/comment/${a.comment.id}`)},m=V(()=>new Date(a.comment.created_at).toUTCString()),i=w(!1);return(c,r)=>(s(),n("div",null,[i.value?(s(),n("form",{key:1,onSubmit:_(f,["prevent"]),class:"flex gap-2 my-2 items-center"},[b(h,{modelValue:d(u).updatedContent,"onUpdate:modelValue":r[0]||(r[0]=p=>d(u).updatedContent=p),class:"w-full py-1 px-2 border"},null,8,["modelValue"]),e("button",{onClick:r[1]||(r[1]=p=>i.value=!1),class:"border p-1 rounded"}," cancel "),ne],40,le)):(s(),n("p",oe,g(t.comment.content),1)),ae,e("div",re,[e("div",de,g(d(m)),1),e("div",ie,[e("span",{onClick:r[2]||(r[2]=p=>i.value=!0),class:"material-symbols-outlined text-lg cursor-pointer"}," edit "),e("span",{onClick:v,class:"material-symbols-outlined text-lg cursor-pointer"}," delete ")])])]))}},ce={class:"max-w-7xl mx-auto sm:px-6 lg:px-32 h-full py-10 flex flex-row"},me={class:"relative bg-white border border-gray-200 shadow w-2/3 mx-auto p-6 space-y-4 rounded-lg"},pe=e("span",{class:"material-symbols-outlined text-lg"},"keyboard_backspace",-1),be=e("span",{class:""},"Go Back",-1),fe={class:"space-y-5"},ve={key:0,class:"flex flex-row items-center justify-between"},ke={class:"basis-11/12 flex flex-row items-center gap-2 truncate"},ye={class:"bg-yellow-200 px-2"},ge={class:"basis-1/12 flex gap-2 whitespace-nowrap justify-end"},he=["onSubmit"],we={class:"flex flex-col w-full gap-2 h-full"},xe={class:"flex w-full gap-2"},_e=e("button",{type:"submit",class:"text-sm border p-1.5 basis-1/2 rounded-lg hover:bg-green-300 hover:text-white hover:font-bold"}," Submit ",-1),Ce={class:"border border-gray-200 rounded p-4 h-60 flex flex-col gap-2 overflow-y-auto"},$e={class:"flex justify-between"},Se=e("h3",{class:"font-bold text-xl"}," Subtask ",-1),Ve=["onSubmit"],Ee={class:"flex gap-2 mt-2"},Ue=e("button",{type:"submit",class:"border p-1 rounded hover:bg-gray-50 hover:shadow-sm"}," Submit ",-1),Ae={key:0,class:"text-sm text-red-500 mt-2 ml-2"},De={class:"border border-gray-200 rounded p-4 space-y-4"},je={class:"flex justify-between"},Be=e("h3",{class:"font-bold text-xl"},"Comments",-1),Te=["onSubmit"],Le={class:"flex gap-2 mt-2"},ze=e("button",{type:"submit",class:"border p-1 rounded hover:bg-gray-50 hover:shadow-sm"}," Submit ",-1),Fe={key:0,class:"text-sm text-red-500 mt-2 ml-2"},Ne={class:"space-y-4 h-60 overflow-y-auto"},Ge={__name:"Show",props:["target_task","subtasks","comments","errors"],setup(t){const a=t,u=w(!1),f=w(!1),v=w(!1),m=y({is_completed:null}),i=y({keyword:a.target_task.keyword,description:a.target_task.description}),c=y({description:null,type:"subtask",parent_id:a.target_task.id}),r=y({task_id:a.target_task.id,content:""});function p(){i.patch(`${a.target_task.id}`,{onSuccess:()=>{u.value=!1}})}const k=()=>{c.post("/blocksix",{onSuccess:()=>c.reset("description")})},F=E=>{m.is_completed=E,m.patch(`${a.target_task.id}`)},N=()=>{r.post("/comment",{onSuccess:()=>r.reset("content")})};function P(){}return(E,o)=>{const J=O("AuthenticatedLayout");return s(),n("div",null,[b(d(X),{title:"BlockSix (show)"}),b(J,{class:"relative"},{default:C(()=>[e("div",ce,[e("div",me,[e("div",null,[P?(s(),S(d(q),{key:0,href:"/blocksix",class:"text-sm whitespace-nowrap cursor-pointer items-center flex gap-2 border rounded-full px-3 w-min hover:bg-gray-50"},{default:C(()=>[pe,be]),_:1})):x("",!0)]),e("div",fe,[u.value?(s(),n("form",{key:1,onSubmit:_(p,["prevent"]),class:"space-y-3"},[e("div",we,[b(T,{value:"Keyword",class:"bg-yellow-200 w-min px-1"}),b(h,{modelValue:d(i).keyword,"onUpdate:modelValue":o[2]||(o[2]=l=>d(i).keyword=l),class:"w-full p-1 border"},null,8,["modelValue"]),b(T,{value:"Description"}),b(h,{modelValue:d(i).description,"onUpdate:modelValue":o[3]||(o[3]=l=>d(i).description=l),class:"w-full p-1 border"},null,8,["modelValue"])]),e("div",xe,[e("button",{onClick:o[4]||(o[4]=l=>u.value=!1),class:"text-sm border p-1.5 basis-1/2 rounded-lg hover:bg-red-300 hover:text-white hover:font-bold"}," Cancel "),_e])],40,he)):(s(),n("div",ve,[e("div",ke,[b(z,{value:t.target_task.id,"onUpdate:checked":o[0]||(o[0]=l=>F(l)),checked:t.target_task.is_completed==1},null,8,["value","checked"]),e("p",ye,g(t.target_task.keyword),1),e("p",{class:$([t.target_task.is_completed?"line-through":"","truncate"])},g(t.target_task.description),3)]),e("div",ge,[e("span",{onClick:o[1]||(o[1]=l=>u.value=!0),class:"material-symbols-outlined text-lg cursor-pointer"}," edit ")])])),e("div",Ce,[e("div",$e,[Se,f.value?(s(),n("span",{key:1,onClick:o[6]||(o[6]=l=>{f.value=!1,d(c).reset()}),class:"material-symbols-outlined mr-1 cursor-pointer"}," cancel ")):(s(),n("span",{key:0,onClick:o[5]||(o[5]=l=>f.value=!0),class:"material-symbols-outlined mr-1 cursor-pointer"}," add_circle "))]),f.value?(s(),n("form",{key:0,onSubmit:_(k,["prevent"]),class:"border px-2 py-1 w-full rounded"},[e("div",Ee,[b(h,{modelValue:d(c).description,"onUpdate:modelValue":o[7]||(o[7]=l=>d(c).description=l),class:"w-full pl-2 border rounded-sm"},null,8,["modelValue"]),Ue]),t.errors?(s(),n("p",Ae,g(t.errors.description),1)):x("",!0)],40,Ve)):x("",!0),(s(!0),n(j,null,B(t.subtasks,l=>(s(),S(se,{key:l,subtask:l},null,8,["subtask"]))),128))]),e("div",De,[e("div",je,[Be,v.value?(s(),n("span",{key:1,onClick:o[9]||(o[9]=l=>{v.value=!1,d(r).reset()}),class:"material-symbols-outlined mr-1 cursor-pointer"}," cancel ")):(s(),n("span",{key:0,onClick:o[8]||(o[8]=l=>v.value=!0),class:"material-symbols-outlined mr-1 cursor-pointer"}," add_circle "))]),v.value?(s(),n("form",{key:0,onSubmit:_(N,["prevent"]),class:"border px-2 py-1 w-full rounded"},[e("div",Le,[b(h,{modelValue:d(r).content,"onUpdate:modelValue":o[10]||(o[10]=l=>d(r).content=l),class:"w-full pl-2 border rounded-sm"},null,8,["modelValue"]),ze]),t.errors?(s(),n("p",Fe,g(t.errors.content),1)):x("",!0)],40,Te)):x("",!0),e("div",Ne,[(s(!0),n(j,null,B(t.comments,(l,M)=>(s(),S(ue,{key:M,class:"border p-3 rounded",comment:l},null,8,["comment"]))),128))])])])])])]),_:1})])}}};export{Ge as default};
